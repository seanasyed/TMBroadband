<!DOCTYPE HTML>

<html>
	<head>
		<title>EQUniform Database</title>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="main.css" />
		<link rel="icon" href="trojanhead.png" />
		<script type="text/javascript" src=""></script>
		<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase.js"></script>
		<script>
		  // Initialize Firebase
		  var config = {
		    apiKey: "AIzaSyC7VFaPLjxXwTmIJRPlz0Qt9mhLTH2Dfko",
		    authDomain: "tmbroadband-80256.firebaseapp.com",
		    databaseURL: "https://tmbroadband-80256.firebaseio.com",
		    projectId: "tmbroadband-80256",
		    storageBucket: "tmbroadband-80256.appspot.com",
		    messagingSenderId: "106316365039"
		  };
		  firebase.initializeApp(config);
	      initApp = function() {
	        firebase.auth().onAuthStateChanged(function(user) {
	          if (user) {
	            // User is signed in.
	            var displayName = user.displayName;
	            var email = user.email;
	            var emailVerified = user.emailVerified;
	            var photoURL = user.photoURL;
	            var uid = user.uid;
	            var phoneNumber = user.phoneNumber;
	            var providerData = user.providerData;
	          } else {
	            // User is signed out.
	            /* document.getElementById('sign-in-status').textContent = 'Signed out';
	            document.getElementById('sign-in').textContent = 'Sign in';
	            document.getElementById('account-details').textContent = 'null'; */
	            window.location.replace('index.html'); 
	          }
	        }, function(error) {
	          console.log(error);
	        });
	      };
	
	      window.addEventListener('load', function() {
	        initApp()
	      });
	    
    	var w = new Worker('polling.js'); 
    	
    	w.addEventListener('message', function(e) {
    		
    		//For testing purposes, log the messages
    		console.log(e.data); 
    	}); 
    	
    	w.postMessage('poll'); 
	    
	    function signOut() {
	    	firebase.auth().signOut().then(function() {
	    		  console.log('Signed Out');
	    		  window.location.replace('index.html'); 
	    		}, function(error) {
	    		  console.error('Sign Out Error', error);
	    		});
	    }
	    
	    function clearFields() {
	    	document.getElementById("lastIn").value = ""; 
	    	document.getElementById("firstIn").value = ""; 
	    	document.getElementById("classIn").value = ""; 
	    	document.getElementById("emailIn").value = ""; 
	    	document.getElementById("jacketIn").value = ""; 
	    	document.getElementById("notesIn").value = ""; 
	    	document.getElementById("capeIn").value = ""; 
	    	document.getElementById("pantsIn").value = ""; 
	    	document.getElementById("hangerIn").value = ""; 
	    	document.getElementById("helmetIn").value = ""; 
	    	document.getElementById("statusIn").value = ""; 
	    	document.getElementById("depositIn").value = ""; 
	    	document.getElementById("idIn").value = ""; 
	    	document.getElementById("instrumentIn").value = ""; 
	    	document.getElementById("modelIn").value = ""; 
	    	document.getElementById("lockerIn").value = ""; 
	    	document.getElementById("comboIn").value = ""; 
	    	
	    	console.log("All fields cleared."); 
	    }
	    
	    var database = firebase.database(); 
	    
	    </script>
	</head>
	<body>
		<div id="infoBox">
		</div>
		<hr id="vert" width="1" size="500">
		<hr id="horiz" width="500" size="0.5">
		<hr id="horiz2" width="500" size="0.5">
		<button type="button" class="button" id="signOutButton" onclick="signOut()">Sign Out</button>
		<button type="button" class="button" id="saveButton" onclick="save()">Save</button>
		<button type="button" class="button" id="searchButton" onclick="search()">Search</button>
		<button type="button" class="button" id="clearButton" onclick="clearFields()">Clear</button>
		<button type="button" class="button" id="inventoryButton" onclick="inventory()">Inventory</button>
		<button type="button" class="button" id="mailMergeButton" onclick="mailMerge()">Mail Merge</button>
		<button type="button" class="button" id="copyButton" onclick="copy()">Copy to Current Term</button>
		<div class="info" id="lastName">
			Last: <input type="text" id="lastIn"/>
		</div>
		<div class="info" id="firstName">
			First: <input type="text" id="firstIn" />
		</div>
		<div class="info" id="class">
			Class: <input type="text" id="classIn"/>
		</div>
		<div class="info" id="instrument">
			Instrument: <input type="text" id="instrumentIn" />
		</div>
		<div class="info" id="id">
			ID: <input type="text" id="idIn" />
		</div>
		<div class="info" id="email">
			Email: <input type="text" id="emailIn" />
		</div>
		<div class="info" id="model">
			Model: <input type="text" id="modelIn" />
		</div>
		<div class="info" id="locker">
			Locker: <input type="text" id="lockerIn" />
		</div>
		<div class="info" id="combo">
			Combo: <input type="text" id="comboIn" />
		</div>
		<div class="info" id="eqnotes">
			Notes: <textarea id="notesIn"></textarea>
		</div>
		<div class="info" id="jacket">
			Jacket: <input type="text" id="jacketIn" />
		</div>
		<div class="info" id="cape">
			Cape: <input type="text" id="capeIn" />
		</div>
		<div class="info" id="pants">
			Pants: <input type="text" id="pantsIn" />
		</div>
		<div class="info" id="hanger">
			Hanger: <input type="text" id="hangerIn" />
		</div>
		<div class="info" id="helmet">
			Helmet: <input type="text" id="helmetIn" /> 
		</div>
		<div class="info" id="status">
			Status: <input type="text" id="statusIn" />
		</div>
		<div class="info" id="uninotes">
			Notes: <textarea id="notesIn"></textarea>
		</div>
		<div class="info" id="deposit">
			Deposit: <input type="text" id="depositIn" />
		</div>
		<div class="info" id="term">
			Term: <select id="termSelect" onclick="changeTerm()">
				<option value="Fall 2018">Fall 2018</option>
				<option value="Spring 2019">Spring 2019</option>
			</select>
		</div>
	</body>
	
	
	
</html>